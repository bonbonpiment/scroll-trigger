angular.module("scroll-trigger",[]).constant("scrollTriggerDefaultOptions",{offset:0,interval:120,explicitScroll:!1}).provider("ScrollTrigger",["scrollTriggerDefaultOptions",function(e){var r=angular.copy(e);this.offset=function(e){return angular.isUndefined(e)?r.offset:void(angular.isNumber(e)&&(r.offset=e))},this.interval=function(e){return angular.isUndefined(e)?r.interval:void(angular.isNumber(e)&&e>0&&(r.interval=e))},this.explicitScroll=function(e){return angular.isUndefined(e)?r.explicitScroll:void(r.explicitScroll=!!e)},this.$get=["$window","offsetFn","screenEdgeFn","throttleFn",function(e,t,n,i){var l=n(),o=0,f=function(e,n){var i=t(e.elem).top;return e.end&&(i+=e.elem.offsetHeight),i<n+r.offset},s={buffer:{},listening:!1,listen:function(){this.listening||(angular.element(e).on("scroll",this.listener),this.listening=!0)},update:function(){var t=n()+r.offset;angular.forEach(s.buffer,function(e,r,n){f(e,t)&&(e.action(),e.stay||delete n[r])}),Object.keys(s.buffer).length||(angular.element(e).off("scroll"),s.listening=!1)},register:function(e){var t=e.id||++o;if(!r.explicitScroll&&f(e,l)){if(!e.stay)return e.action();e.action()}this.buffer[t]=e,this.listen()}};return s.listener=i(s.update,r.interval),s}]}]).directive("scrollTrigger",["$parse","ScrollTrigger",function(e,r){return{priority:1,restrict:"A",scope:!1,link:function(t,n,i){r.register({id:i.scrollTriggerId,elem:n[0],end:"scrollToEnd"in i,stay:"scrollPersist"in i,action:function(){return e(i.scrollTrigger)(t)}})}}}]),angular.module("scroll-trigger").factory("offsetFn",["$window",function(){return function(e){var r=0,t=0;do r+=e.offsetTop||0,t+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:r,left:t}}}]),angular.module("scroll-trigger").factory("screenEdgeFn",["$window",function(e){return function(){return e.pageYOffset+e.innerHeight}}]),angular.module("scroll-trigger").factory("throttleFn",["$timeout",function(e){return function(r,t){var n,i=0;return function(){var l=arguments,o=this,f=+new Date,s=function(){i=f,r.apply(o,l)};e.cancel(n),f>=i+t?s():n=e(s,t,!1)}}}]);