angular.module("scroll-trigger",[]).constant("scrollTriggerDefaultOptions",{offset:0,interval:120}).provider("ScrollTrigger",["scrollTriggerDefaultOptions",function(r){var e=angular.copy(r);this.offset=function(r){return angular.isUndefined(r)?e.offset:void(angular.isNumber(r)&&(e.offset=r))},this.interval=function(r){return angular.isUndefined(r)?e.interval:void(angular.isNumber(r)&&r>0&&(e.interval=r))},this.$get=["$window","offsetFn","thresholdFn","throttleFn",function(r,t,n,i){var o={buffer:{},scrollTriggerIdCounter:0,listen:function(r){r.isContainer&&angular.element(r.elem).on("scroll",this.listener)},needAction:function(r,n){var i,o=r.elem;return r.isContainer&&r.toEnd?n+e.offset>=o.scrollHeight:(i=t(r.elem).top,r.toEnd&&(i+=o.offsetHeight),i<=n+e.offset)},update:function(r){r.stopPropagation();var e=n(r.currentTarget);angular.forEach(o.buffer,function(t,n,i){t.busy()||o.needAction(t,e,r)&&(t.action(),t.persist||delete i[n])})},register:function(r){var e=r.id||++o.scrollTriggerIdCounter,i=n(),l=t(r.elem).top;(!(r.run||!r.isContainer&&(r.end&&l+elem.offsetHeight<i||!r.end&&i>l))||(r.action(),r.run&&r.persist))&&(this.buffer[e]=r,this.listen(r))}};return o.listener=i(o.update,e.interval),angular.element(r).on("scroll",o.listener),o}]}]).directive("scrollTrigger",["$parse","ScrollTrigger",function(r,e){return{priority:1,restrict:"A",scope:!1,link:function(t,n,i){e.register({id:i.scrollTriggerId,elem:n[0],toEnd:"triggerAtEnd"in i,persist:"triggerPersist"in i,isContainer:"scrollContainer"in i,run:"triggerRun"in i,action:function(){return r(i.scrollTrigger)(t,{$params:{$elem:n,$attrs:i}})},busy:i.triggerActive?function(){return!r(i.triggerActive)(t)}:function(){return!1}})}}}]),angular.module("scroll-trigger").factory("offsetFn",["$window",function(){return function(r){var e=0,t=0;do e+=r.offsetTop||0,t+=r.offsetLeft||0,r=r.offsetParent;while(r);return{top:e,left:t}}}]),angular.module("scroll-trigger").factory("thresholdFn",["$window",function(r){return function(e){return e=e||r,e==r?e.pageYOffset+e.innerHeight:e.scrollTop+e.clientHeight}}]),angular.module("scroll-trigger").factory("throttleFn",["$timeout",function(r){return function(e,t){var n,i=0;return function(){var o=arguments,l=this,s=+new Date,u=function(){i=s,e.apply(l,o)};r.cancel(n),s>=i+t?u():n=r(u,t,!1)}}}]);